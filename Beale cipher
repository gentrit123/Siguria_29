import sys
import os

class BealsCipher:
    def __init__(self):
        choose_function = input("Enter e to encode or d to decode:")
        if(choose_function.lower() == 'e'):
            self.encoder()
        elif(choose_function.lower() == 'd'):
            self.decoder()
        else:
            print("Please try again!")
    def encoder(self):
        book = input("Enter text file to use as key:")
        word = input("Enter word to encode:")
        outArray = []
        f = open(book, "r")
        book_characters = list(f.read())
        word_characters = list(word)
        
        output_array = []
        lastIdx = 0
        for char in word_characters:
            try:
                charidx = book_characters.index(char,lastIdx,len(book_characters) -1)
                lastIdx = charidx
                output_array.append(charidx + 1)
            except ValueError as e:
                charidx = book_characters.index(char,0,lastIdx)
                lastIdx = charidx
                output_array.append(charidx + 1)
        result = ""
        for x in output_array:
            result += str(x) + " "
        print("Encoded word: " + result)
          
    def decoder(self):
        book = input("Enter text file to use as key:")
        word = input("Enter word to decode:")
        outArray = []
        f = open(book, "r")
        book_characters = list(f.read())
        output_array = []
        word_encoded = word.strip().split(" ")
        for char in word_encoded:
            output_array.append(book_characters[int(char)-1])
        result = ""
        for x in output_array:
            result += x
        print("Decoded word: " + result)
        
BealsCipher()
        
 
        
        
            
            
        
        
        
        
        
                
                
                
            
        
        
        
        
